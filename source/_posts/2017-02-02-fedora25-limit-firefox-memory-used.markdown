---
layout: post
date: '2017-02-02 12:00:00 +0600'
comments: true
categories:
  - fedora25
  - linux
  - cgroups
  - firefox
published: true
title: Как ограничить потребление памяти браузером Mozilla Firefox в Fedora 25
---

## Ограничить потребление памяти для Mozilla Firefox в Fedora 25

На работе использую ноутбук HP Probook 450 g3 c 4 гигабайтами ОЗУ. Установил туда Fedora 25. и Firefox. 
И столкнулся со следующей проблемой - откроешь около 15 вкладок, и через час другой система начинает жутко свопится. лучшее решение - выключить, снова включить. Начал искать в чем проблема? 
<!--more-->

Выяснил, что всему проблема с потреблением памяти у современных браузеров. Отьедают почти всю память, когда кончается ОЗУ, начинают активно использовать swap. На ноутбуке слабый жесткий диск, который не  выдерживает запросов на чтение-запись. 

Решение:
- Купить ОЗУ 16 ГБ. Говорят, это решает проблему с излишним потреблением памяти у браузера
- Купить SSD-диск. Говорят, это решает проблему с излишней нагрузкой на жесткий диск
- Ограничить размер доступной памяти через cgroups.

Для первых двух решений нет денег, и надо выбивать их у руководства.

Рассмотрим последний вариант:

В интернете нашел [статью](https://samthursfield.wordpress.com/2015/05/07/running-firefox-in-a-cgroup-using-systemd/), в которой расказывается как через cgroups органичить потребление памяти для браузера.

я сделал все как в статье, только размер доступной памяти увеличил до 1Гб. 

Теперь чтобы запустить браузер, приходится открывать терминал, вызывать команду, вводить пароль для sudo, затем открывается браузер.

Откроешь около 10 страниц и браузер закрывается. начинаешь по-новой запускать браузер. но есть плюс - не нужно перегружать систему, так как swap не используется.
