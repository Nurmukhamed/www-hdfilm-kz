---
layout: post
title: Домашний сервер - вылет жесткого диска. Возврат на год назад
date: '2017-04-18 12:30:30 +0600'
comments: true
published: true
categories:
- homeserver
- hdd
- disk failure
- letsencrypt
- docker
- nginx
---

Вылетел жесткий диск. <!--more-->

Дали премию, купил для домашнего сервера нормальный корпус и систему "необслуживаемая водянка". Разобрал сервер, снова собрал. Включил, с работы проверил, сервер пингуется, а доступа нет.

Пришлось разобрать сервер, подключить видеокарту, посмотрел - ОС ругается, что не может подключить раздел /home. Ошибка диска. 

Что делать? выташил старые диски, начал проверять, какие еще работают - нашел старый диск 320ГБ. подключил, там старая система прошлогодняя. А потом вспомнил, что я с этого диска перетащил на 750ГБ диск. Как следует разбил диск на различные разделы. В данное время оставил старый диск, нашел статью как обьеденить [docker, nginx, letsencrypt](https://blog.virtualzone.de/2017/02/using-lets-encrypt-eff-certbot-nginx-docker.html). Обновил сертификаты.

Мои работы за последние полгода сводились к тому, чтобы перенести все с домашнего сервера на внешние ресурсы:

- Важные бакапы были перенесены на amazon s3. также там были настроен Amazon Glacier;
- Блоги были перенесены на github, prose.io, travis;
- Сканы книг - раздача торрентов была пересена на внешний сидбокс, заплатил за год вперед;
- Есть выделенный arm-сервер у scaleway;

Что потерял:

- В /home что-то хранилось, но что именно я точно не могу вспомнить.
- настройки докера;
- настройки libvirt.
- сертификаты rsa, gpg. придется перевыпускать.

Что думаю сделать:

- Нужен внешний git-сервер, допустим gogoc. Думаю, возьму еще один arm-инстанс на scaleway;
- Пришла идея собрать одиночный coreos с функционалом домашнего сервера - asterisk, torrent, airvideo, gogoc, tmux;
- kubernetes - думаю, что я потерял много времени развертывая кластер на домашнем сервере. Нужно отработать все на amazon, google cloud.

